<html>
<head>
<title>Elinor's Hangman Game</title>
<style>
</style>
<script type="text/javascript">
<!--
  var wrong = "";
  var word = "";
  var right = ""

  function toggleVisibility(id) {
    var e = document.getElementById(id);
    if(e.style.display == 'block')
      e.style.display = 'none';
    else
      e.style.display = 'block';
  };

  function start(aWord) {
    toggleVisibility("start");
    toggleVisibility("play");
    word = aWord.toUpperCase();
    right = "_".repeat(word.lenght);
    document.getElementById("wrongletters").innerHTML = right;
  };

  function startOnePlayer() {
    start("HANGMAN");
  };

  function startTwoPlayer() {
    start(document.getElementById("word").value);
  };

  function updateWrong(letter) {
    wrong += letter;
    document.getElementById("hangman").src = wrong.length + ".png";
    document.getElementById("wrongletters").innerHTML = wrong;
  };

  function updateRight(letter) {
    var newright = "";
    for (i = 0; i < word.length; i++) {
      if (word.charAt(i) == letter) {
          newright += letter;
      } else {
        newright += right.charAt(i);
      }
    }
    right = newright;
    document.getElementById("wrongletters").innerHTML = right;
  };

  function test() {
    var letter = document.getElementById('guess').value.toUpperCase();
    if (wrong.includes(letter)) {
      //Already guessed, TODO alert
    } else {
      if (word.includes(letter)) {
        //Correct
        updateRight(letter);
      } else {
        //wrong
        updateWrong(letter);
      }
    }
    document.getElementById('guess').value = "";
    return true;
  };
//-->
</script>

</head>
  <body>
    <form>
      <div id="top">
        <div style="width:50%" id="hangmandiv"><img id="hangman" src="start.png"></div>
      </div>
      <hr />
      <div id="bottom">
        <div id="start" style="display:block">
          <div id="player1">1 Player:  <button type="button" onclick="startOnePlayer()" >Random Word</button></div>
          <hr />
          <div id="player2">2 Player:  <input type="password" id="word"/> <button type="button" onclick="startTwoPlayer()" >Start</button></div>
        </div>
        <div id="play" style="display:none">
          <div><p><b><i>Wrongly Guessed Letters:</i></b></p><p id="wrongletters"></p></div>
          <hr />
          <div id="answer"></div>
          <div> <input type="text" size="1" id="guess" tabindex=1 onkeypress="if (event.keyCode == 13) document.getElementById('makeGuess').click()"/> <button id="makeGuess" type="button" onclick="test()"> Guess </button></div>
        </div>
      </div>
    </form>
  </body>
</html>
