<html>
<head>
<title>Hangman Game</title>
<style>
</style>
<script>
<!--
  var difficulty = new Object();
  difficulty.easy = ["exit",
  "car",
  "small",
  "gas",
  "no",
  "time"];

  difficulty.medium = ["magnet",
  "school",
  "road",
  "lion",
  "little",
  "self",
  "creek",
  "house"];

  difficulty.hard = ["nutrition",
  "rainbow",
  "beware",
  "apartment",
  "traveling",
  "storage",
  "parking"];

  var wrong = "";
  var word = "";
  var rightword = "";

  function toggleVisibility(id) {
    var e = document.getElementById(id);
    if(e.style.display == 'block')
      e.style.display = 'none';
    else
      e.style.display = 'block';
  };

  function start(aWord) {
    toggleVisibility("start");
    toggleVisibility("play");
    word = aWord.toUpperCase();
    var underscores = "_";
    rightword = underscores.repeat(word.length);
    document.getElementById("answer").innerHTML = addspaces(rightword);
    document.getElementById("hangman").src = "0.png";
  };

  function startOnePlayer(level) {
    //start("HANGMAN");
    var list = difficulty[level];
    var loc = Math.floor(Math.random() * ((list.length)-0)) + 0 + 1
    var startword = list[loc];
    start(startword);
  };

  function startTwoPlayer() {
    start(document.getElementById("word").value);
  };

  function updateWrong(letter) {
    wrong += letter;
    if (wrong.length > 11) {
      //you lose
      finished("lost");
    } else {
      document.getElementById("hangman").src = wrong.length + ".png";
      document.getElementById("wrongletters").innerHTML = addspaces(wrong);
    }
  };

  function updateRight(letter) {
    var newright = "";
    for (i = 0; i < word.length; i++) {
      if (word.charAt(i) == letter) {
          newright += letter;
      } else {
        newright += rightword.charAt(i);
      }
    }
    rightword = newright;
    document.getElementById("answer").innerHTML = addspaces(rightword);
    if (rightword.includes("_") == false) {
      finished("win");
    }
  };

  function addspaces(theword) {
    var returnword = "";
    for (i = 0; i < theword.length; i++) {
      returnword += (theword.charAt(i) + " ");
    }
    return returnword;
  };

  function finished(outcome) {
    toggleVisibility("guessspace");
    toggleVisibility("reset");
    document.getElementById("hangman").src = outcome + ".png";
  };

  function startover() {
    window.location.reload();
  };

  function test() {
    var letter = document.getElementById('guess').value.toUpperCase();
    if (wrong.includes(letter)) {
      //Already guessed
    } else {
      if (word.includes(letter)) {
        //Correct
        updateRight(letter);
      } else {
        //wrong
        updateWrong(letter);
      }
    }
    document.getElementById('guess').value = "";
    return true;
  };
//-->
</script>

</head>
  <body>
    <form>
      <div id="top">
        <div id="hangmandiv"><img style="max-width:50%; height:auto" id="hangman" src="start.png"></div>
      </div>
      <div id="bottom">
        <div id="start" style="display:block">
          <div id="player1">1 Player (Random Word):  <button type="button" onclick="startOnePlayer('easy')" >Easy</button> <button type="button" onclick="startOnePlayer('medium')" >Medium</button> <button type="button" onclick="startOnePlayer('hard')" >Hard</button></div>
          <br />
          <div id="player2">2 Player:  <input type="password" id="word"/> <button type="button" onclick="startTwoPlayer()" >Start</button></div>
        </div>
        <div id="play" style="display:none">
          <div><p><b><i>Wrongly Guessed Letters:</i></b></p><p id="wrongletters"></p></div>
          <hr />
          <div id="answer"></div>
          <div id="guessspace" style="display:block"><p /> <input type="text" size="1" id="guess" tabindex=1 onkeypress="if (event.keyCode == 13) document.getElementById('makeGuess').click()"> <button id="makeGuess" type="button" onclick="test()"> Guess </button></div>
          <div id="reset" style="display:none"><button type="button" id="startoverbutton" onclick="startover()" > Start Over </button></div>
        </div>
      </div>
    </form>
    <div style="position: absolute; bottom: 0;">Hangwoman by Elinor Nylander, v0.9, released March 2016, source code at <a href="http://github.com/elinorn/hangman">github</a>
      <audio controls autoplay="autoplay" loop="loop" src="backgroundmusic.wav"></audio>
    </div>
  </body>
</html>
